{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///D:/io-t-webpage%20%282%29/lib/supabase/server.ts"],"sourcesContent":["import { createServerClient } from \"@supabase/ssr\"\nimport { cookies } from \"next/headers\"\n\nexport async function createClient() {\n  const cookieStore = await cookies()\n\n  return createServerClient(process.env.NEXT_PUBLIC_SUPABASE_URL!, process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!, {\n    cookies: {\n      getAll() {\n        return cookieStore.getAll()\n      },\n      setAll(cookiesToSet) {\n        try {\n          cookiesToSet.forEach(({ name, value, options }) => cookieStore.set(name, value, options))\n        } catch {\n          // Server component context\n        }\n      },\n    },\n  })\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;;;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,4IAAO;IAEjC,OAAO,IAAA,iMAAkB,iVAAoF;QAC3G,SAAS;YACP;gBACE,OAAO,YAAY,MAAM;YAC3B;YACA,QAAO,YAAY;gBACjB,IAAI;oBACF,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAAK,YAAY,GAAG,CAAC,MAAM,OAAO;gBAClF,EAAE,OAAM;gBACN,2BAA2B;gBAC7B;YACF;QACF;IACF;AACF"}},
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file:///D:/io-t-webpage%20%282%29/lib/validators/schemas.ts"],"sourcesContent":["import { z } from \"zod\"\n\n// Auth schemas\nexport const loginSchema = z.object({\n  email: z.string().email(\"อีเมลไม่ถูกต้อง\"),\n  password: z.string().min(6, \"รหัสผ่านต้องมีอย่างน้อย 6 ตัวอักษร\"),\n})\n\nexport const signUpSchema = z\n  .object({\n    email: z.string().email(\"อีเมลไม่ถูกต้อง\"),\n    password: z.string().min(8, \"รหัสผ่านต้องมีอย่างน้อย 8 ตัวอักษร\"),\n    confirmPassword: z.string(),\n    fullName: z.string().min(2, \"ชื่อต้องมีอย่างน้อย 2 ตัวอักษร\"),\n  })\n  .refine((data) => data.password === data.confirmPassword, {\n    message: \"รหัสผ่านไม่ตรงกัน\",\n    path: [\"confirmPassword\"],\n  })\n\nexport const passwordResetSchema = z.object({\n  email: z.string().email(\"อีเมลไม่ถูกต้อง\"),\n})\n\n// Device schemas\nexport const deviceSchema = z.object({\n  name: z.string().min(1, \"ชื่ออุปกรณ์จำเป็น\").max(100, \"ชื่ออุปกรณ์ต้องไม่เกิน 100 ตัวอักษร\"),\n  type: z.enum([\"temperature\", \"humidity\", \"motion\", \"light\", \"other\"]),\n  location: z.string().max(100, \"สถานที่ต้องไม่เกิน 100 ตัวอักษร\").optional(),\n  mac_address: z\n    .string()\n    .regex(/^([0-9A-Fa-f]{2}:){5}([0-9A-Fa-f]{2})$/, \"รูปแบบ MAC Address ไม่ถูกต้อง\")\n    .optional(),\n  mqtt_topic: z.string().min(1, \"MQTT Topic จำเป็น\"),\n  is_active: z.boolean().default(true),\n})\n\nexport const deviceSettingsSchema = z.object({\n  min_threshold: z.number().optional(),\n  max_threshold: z.number().optional(),\n  alert_enabled: z.boolean().default(true),\n  update_interval: z.number().min(10, \"Interval ต้องมากกว่า 10 วินาที\").max(3600, \"Interval ต้องไม่เกิน 1 ชั่วโมง\"),\n})\n\nexport const deviceControlSchema = z.object({\n  action: z.enum([\"power_on\", \"power_off\", \"restart\", \"update_settings\"]),\n  device_id: z.string().uuid(\"Device ID ไม่ถูกต้อง\"),\n  settings: deviceSettingsSchema.optional(),\n})\n\n// User schemas\nexport const userUpdateSchema = z.object({\n  full_name: z.string().min(2, \"ชื่อต้องมีอย่างน้อย 2 ตัวอักษร\").optional(),\n  role: z.enum([\"admin\", \"user\"]).optional(),\n})\n\n// Alert schemas\nexport const alertSchema = z.object({\n  device_id: z.string().uuid(\"Device ID ไม่ถูกต้อง\"),\n  type: z.enum([\"threshold_exceeded\", \"device_offline\", \"battery_low\", \"error\"]),\n  severity: z.enum([\"info\", \"warning\", \"critical\"]),\n  message: z.string().min(1, \"ข้อความแจ้งเตือนจำเป็น\").max(500),\n})\n\n// Type exports\nexport type LoginInput = z.infer<typeof loginSchema>\nexport type SignUpInput = z.infer<typeof signUpSchema>\nexport type PasswordResetInput = z.infer<typeof passwordResetSchema>\nexport type DeviceInput = z.infer<typeof deviceSchema>\nexport type DeviceSettingsInput = z.infer<typeof deviceSettingsSchema>\nexport type DeviceControlInput = z.infer<typeof deviceControlSchema>\nexport type UserUpdateInput = z.infer<typeof userUpdateSchema>\nexport type AlertInput = z.infer<typeof alertSchema>\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA;;AAGO,MAAM,cAAc,yKAAC,CAAC,MAAM,CAAC;IAClC,OAAO,yKAAC,CAAC,MAAM,GAAG,KAAK,CAAC;IACxB,UAAU,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;AAC9B;AAEO,MAAM,eAAe,yKAAC,CAC1B,MAAM,CAAC;IACN,OAAO,yKAAC,CAAC,MAAM,GAAG,KAAK,CAAC;IACxB,UAAU,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IAC5B,iBAAiB,yKAAC,CAAC,MAAM;IACzB,UAAU,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;AAC9B,GACC,MAAM,CAAC,CAAC,OAAS,KAAK,QAAQ,KAAK,KAAK,eAAe,EAAE;IACxD,SAAS;IACT,MAAM;QAAC;KAAkB;AAC3B;AAEK,MAAM,sBAAsB,yKAAC,CAAC,MAAM,CAAC;IAC1C,OAAO,yKAAC,CAAC,MAAM,GAAG,KAAK,CAAC;AAC1B;AAGO,MAAM,eAAe,yKAAC,CAAC,MAAM,CAAC;IACnC,MAAM,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG,qBAAqB,GAAG,CAAC,KAAK;IACtD,MAAM,yKAAC,CAAC,IAAI,CAAC;QAAC;QAAe;QAAY;QAAU;QAAS;KAAQ;IACpE,UAAU,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,KAAK,mCAAmC,QAAQ;IACzE,aAAa,yKAAC,CACX,MAAM,GACN,KAAK,CAAC,0CAA0C,iCAChD,QAAQ;IACX,YAAY,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IAC9B,WAAW,yKAAC,CAAC,OAAO,GAAG,OAAO,CAAC;AACjC;AAEO,MAAM,uBAAuB,yKAAC,CAAC,MAAM,CAAC;IAC3C,eAAe,yKAAC,CAAC,MAAM,GAAG,QAAQ;IAClC,eAAe,yKAAC,CAAC,MAAM,GAAG,QAAQ;IAClC,eAAe,yKAAC,CAAC,OAAO,GAAG,OAAO,CAAC;IACnC,iBAAiB,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,IAAI,kCAAkC,GAAG,CAAC,MAAM;AAClF;AAEO,MAAM,sBAAsB,yKAAC,CAAC,MAAM,CAAC;IAC1C,QAAQ,yKAAC,CAAC,IAAI,CAAC;QAAC;QAAY;QAAa;QAAW;KAAkB;IACtE,WAAW,yKAAC,CAAC,MAAM,GAAG,IAAI,CAAC;IAC3B,UAAU,qBAAqB,QAAQ;AACzC;AAGO,MAAM,mBAAmB,yKAAC,CAAC,MAAM,CAAC;IACvC,WAAW,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG,kCAAkC,QAAQ;IACvE,MAAM,yKAAC,CAAC,IAAI,CAAC;QAAC;QAAS;KAAO,EAAE,QAAQ;AAC1C;AAGO,MAAM,cAAc,yKAAC,CAAC,MAAM,CAAC;IAClC,WAAW,yKAAC,CAAC,MAAM,GAAG,IAAI,CAAC;IAC3B,MAAM,yKAAC,CAAC,IAAI,CAAC;QAAC;QAAsB;QAAkB;QAAe;KAAQ;IAC7E,UAAU,yKAAC,CAAC,IAAI,CAAC;QAAC;QAAQ;QAAW;KAAW;IAChD,SAAS,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG,0BAA0B,GAAG,CAAC;AAC3D"}},
    {"offset": {"line": 170, "column": 0}, "map": {"version":3,"sources":["file:///D:/io-t-webpage%20%282%29/app/api/devices/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server'\nimport { createClient } from '@/lib/supabase/server'\nimport { deviceSchema } from '@/lib/validators/schemas'\nimport { ZodError } from 'zod'\n\nexport async function GET() {\n  try {\n    const supabase = await createClient()\n\n    const {\n      data: { user },\n      error: userError,\n    } = await supabase.auth.getUser()\n\n    if (userError || !user) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\n    }\n\n    const { data: devices, error } = await supabase\n      .from('devices')\n      .select('*')\n      .eq('user_id', user.id)\n      .order('created_at', { ascending: false })\n\n    if (error) {\n      return NextResponse.json({ error: error.message }, { status: 500 })\n    }\n\n    return NextResponse.json(devices)\n  } catch (error: any) {\n    console.error('[v0] GET /api/devices error:', error)\n    return NextResponse.json({ error: 'Internal server error' }, { status: 500 })\n  }\n}\n\nexport async function POST(request: Request) {\n  try {\n    const supabase = await createClient()\n\n    const {\n      data: { user },\n      error: userError,\n    } = await supabase.auth.getUser()\n\n    if (userError || !user) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\n    }\n\n    const body = await request.json()\n\n    const validatedData = deviceSchema.parse(body)\n\n    const { data: device, error } = await supabase\n      .from('devices')\n      .insert({\n        user_id: user.id,\n        ...validatedData,\n      })\n      .select()\n      .single()\n\n    if (error) {\n      return NextResponse.json({ error: error.message }, { status: 500 })\n    }\n\n    return NextResponse.json(device, { status: 201 })\n  } catch (error: any) {\n    if (error instanceof ZodError) {\n      return NextResponse.json({ error: 'Validation error', details: error.errors }, { status: 400 })\n    }\n    console.error('[v0] POST /api/devices error:', error)\n    return NextResponse.json({ error: 'Internal server error' }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;AACA;;;;;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,WAAW,MAAM,IAAA,2IAAY;QAEnC,MAAM,EACJ,MAAM,EAAE,IAAI,EAAE,EACd,OAAO,SAAS,EACjB,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;QAE/B,IAAI,aAAa,CAAC,MAAM;YACtB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAe,GAAG;gBAAE,QAAQ;YAAI;QACpE;QAEA,MAAM,EAAE,MAAM,OAAO,EAAE,KAAK,EAAE,GAAG,MAAM,SACpC,IAAI,CAAC,WACL,MAAM,CAAC,KACP,EAAE,CAAC,WAAW,KAAK,EAAE,EACrB,KAAK,CAAC,cAAc;YAAE,WAAW;QAAM;QAE1C,IAAI,OAAO;YACT,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO,MAAM,OAAO;YAAC,GAAG;gBAAE,QAAQ;YAAI;QACnE;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,gCAAgC;QAC9C,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC7E;AACF;AAEO,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,WAAW,MAAM,IAAA,2IAAY;QAEnC,MAAM,EACJ,MAAM,EAAE,IAAI,EAAE,EACd,OAAO,SAAS,EACjB,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;QAE/B,IAAI,aAAa,CAAC,MAAM;YACtB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAe,GAAG;gBAAE,QAAQ;YAAI;QACpE;QAEA,MAAM,OAAO,MAAM,QAAQ,IAAI;QAE/B,MAAM,gBAAgB,8IAAY,CAAC,KAAK,CAAC;QAEzC,MAAM,EAAE,MAAM,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SACnC,IAAI,CAAC,WACL,MAAM,CAAC;YACN,SAAS,KAAK,EAAE;YAChB,GAAG,aAAa;QAClB,GACC,MAAM,GACN,MAAM;QAET,IAAI,OAAO;YACT,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO,MAAM,OAAO;YAAC,GAAG;gBAAE,QAAQ;YAAI;QACnE;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC,QAAQ;YAAE,QAAQ;QAAI;IACjD,EAAE,OAAO,OAAY;QACnB,IAAI,iBAAiB,mJAAQ,EAAE;YAC7B,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;gBAAoB,SAAS,MAAM,MAAM;YAAC,GAAG;gBAAE,QAAQ;YAAI;QAC/F;QACA,QAAQ,KAAK,CAAC,iCAAiC;QAC/C,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC7E;AACF"}}]
}